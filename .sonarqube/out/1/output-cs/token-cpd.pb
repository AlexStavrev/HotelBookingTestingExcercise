’&
o/Users/hk/Documents/Undervisning/Test/Solutions/HotelBooking_Clean/HotelBooking.Infrastructure/DbInitializer.cs
	namespace 	
HotelBooking
 
. 
Infrastructure %
{ 
public 

class 
DbInitializer 
:  
IDbInitializer! /
{		 
public 
void 

Initialize 
( 
HotelBookingContext 2
context3 :
): ;
{ 	
context 
. 
Database 
. 
EnsureDeleted *
(* +
)+ ,
;, -
context 
. 
Database 
. 
EnsureCreated *
(* +
)+ ,
;, -
if 
( 
context 
. 
Booking 
.  
Any  #
(# $
)$ %
)% &
{ 
return 
; 
} 
List 
< 
Customer 
> 
	customers $
=% &
new' *
List+ /
</ 0
Customer0 8
>8 9
{ 
new 
Customer 
{ 
Name #
=# $
$str$ 0
,0 1
Email2 7
=7 8
$str8 F
}G H
,H I
new 
Customer 
{ 
Name #
=# $
$str$ .
,. /
Email0 5
=5 6
$str6 D
}E F
}   
;   
List"" 
<"" 
Room"" 
>"" 
rooms"" 
="" 
new"" "
List""# '
<""' (
Room""( ,
>"", -
{## 
new$$ 
Room$$ 
{$$ 
Description$$ &
=$$& '
$str$$' *
}$$+ ,
,$$, -
new%% 
Room%% 
{%% 
Description%% &
=%%& '
$str%%' *
}%%+ ,
,%%, -
new&& 
Room&& 
{&& 
Description&& &
=&&& '
$str&&' *
}&&+ ,
}'' 
;'' 
DateTime)) 
date)) 
=)) 
DateTime)) $
.))$ %
Today))% *
.))* +
AddDays))+ 2
())2 3
$num))3 4
)))4 5
;))5 6
List** 
<** 
Booking** 
>** 
bookings** "
=**# $
new**% (
List**) -
<**- .
Booking**. 5
>**5 6
{++ 
new,, 
Booking,, 
{,, 
	StartDate,, '
=,,' (
date,,( ,
,,,, -
EndDate,,. 5
=,,5 6
date,,6 :
.,,: ;
AddDays,,; B
(,,B C
$num,,C E
),,E F
,,,F G
IsActive,,H P
=,,P Q
true,,Q U
,,,U V

CustomerId,,W a
=,,a b
$num,,b c
,,,c d
RoomId,,e k
=,,k l
$num,,l m
},,n o
,,,o p
new-- 
Booking-- 
{-- 
	StartDate-- '
=--' (
date--( ,
,--, -
EndDate--. 5
=--5 6
date--6 :
.--: ;
AddDays--; B
(--B C
$num--C E
)--E F
,--F G
IsActive--H P
=--P Q
true--Q U
,--U V

CustomerId--W a
=--a b
$num--b c
,--c d
RoomId--e k
=--k l
$num--l m
}--n o
,--o p
new.. 
Booking.. 
{.. 
	StartDate.. '
=..' (
date..( ,
,.., -
EndDate... 5
=..5 6
date..6 :
...: ;
AddDays..; B
(..B C
$num..C E
)..E F
,..F G
IsActive..H P
=..P Q
true..Q U
,..U V

CustomerId..W a
=..a b
$num..b c
,..c d
RoomId..e k
=..k l
$num..l m
}..n o
}// 
;// 
context11 
.11 
Customer11 
.11 
AddRange11 %
(11% &
	customers11& /
)11/ 0
;110 1
context22 
.22 
Room22 
.22 
AddRange22 !
(22! "
rooms22" '
)22' (
;22( )
context33 
.33 
SaveChanges33 
(33  
)33  !
;33! "
context44 
.44 
Booking44 
.44 
AddRange44 $
(44$ %
bookings44% -
)44- .
;44. /
context55 
.55 
SaveChanges55 
(55  
)55  !
;55! "
}66 	
}77 
}88 ë

u/Users/hk/Documents/Undervisning/Test/Solutions/HotelBooking_Clean/HotelBooking.Infrastructure/HotelBookingContext.cs
	namespace 	
HotelBooking
 
. 
Infrastructure %
{ 
public 

class 
HotelBookingContext $
:% &
	DbContext' 0
{ 
public 
HotelBookingContext "
(" #
DbContextOptions# 3
<3 4
HotelBookingContext4 G
>G H
optionsI P
)P Q
:		 
base		 
(		 
options		 
)		 
{

 	
} 	
public 
DbSet 
< 
Booking 
> 
Booking %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
DbSet 
< 
Room 
> 
Room 
{  !
get" %
;% &
set' *
;* +
}, -
public 
DbSet 
< 
Customer 
> 
Customer '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
} 
} ÿ
p/Users/hk/Documents/Undervisning/Test/Solutions/HotelBooking_Clean/HotelBooking.Infrastructure/IDbInitializer.cs
	namespace 	
HotelBooking
 
. 
Infrastructure %
{ 
public 

	interface 
IDbInitializer #
{ 
void 

Initialize 
( 
HotelBookingContext +
context, 3
)3 4
;4 5
} 
}		 ß
Ä/Users/hk/Documents/Undervisning/Test/Solutions/HotelBooking_Clean/HotelBooking.Infrastructure/Repositories/BookingRepository.cs
	namespace 	
HotelBooking
 
. 
Infrastructure %
.% &
Repositories& 2
{ 
public 

class 
BookingRepository "
:# $
IRepository% 0
<0 1
Booking1 8
>8 9
{		 
private

 
readonly

 
HotelBookingContext

 ,
db

- /
;

/ 0
public 
BookingRepository  
(  !
HotelBookingContext! 4
context5 <
)< =
{ 	
db 
= 
context 
; 
} 	
public 
void 
Add 
( 
Booking 
entity  &
)& '
{ 	
db 
. 
Booking 
. 
Add 
( 
entity !
)! "
;" #
db 
. 
SaveChanges 
( 
) 
; 
} 	
public 
void 
Edit 
( 
Booking  
entity! '
)' (
{ 	
db 
. 
Entry 
( 
entity 
) 
. 
State "
=# $
EntityState% 0
.0 1
Modified1 9
;9 :
db 
. 
SaveChanges 
( 
) 
; 
} 	
public 
Booking 
Get 
( 
int 
id !
)! "
{ 	
return 
db 
. 
Booking 
. 
Include %
(% &
b& '
=>( *
b+ ,
., -
Customer- 5
)5 6
.6 7
Include7 >
(> ?
b? @
=>A C
bD E
.E F
RoomF J
)J K
.K L
FirstOrDefaultL Z
(Z [
b[ \
=>] _
b` a
.a b
Idb d
==e g
idh j
)j k
;k l
}   	
public"" 
IEnumerable"" 
<"" 
Booking"" "
>""" #
GetAll""$ *
(""* +
)""+ ,
{## 	
return$$ 
db$$ 
.$$ 
Booking$$ 
.$$ 
Include$$ %
($$% &
b$$& '
=>$$( *
b$$+ ,
.$$, -
Customer$$- 5
)$$5 6
.$$6 7
Include$$7 >
($$> ?
b$$? @
=>$$A C
b$$D E
.$$E F
Room$$F J
)$$J K
.$$K L
ToList$$L R
($$R S
)$$S T
;$$T U
}%% 	
public'' 
void'' 
Remove'' 
('' 
int'' 
id'' !
)''! "
{(( 	
var)) 
booking)) 
=)) 
db)) 
.)) 
Booking)) $
.))$ %
FirstOrDefault))% 3
())3 4
b))4 5
=>))6 8
b))9 :
.)): ;
Id)); =
==))> @
id))A C
)))C D
;))D E
db** 
.** 
Booking** 
.** 
Remove** 
(** 
booking** %
)**% &
;**& '
db++ 
.++ 
SaveChanges++ 
(++ 
)++ 
;++ 
},, 	
}.. 
}// ¬
Å/Users/hk/Documents/Undervisning/Test/Solutions/HotelBooking_Clean/HotelBooking.Infrastructure/Repositories/CustomerRepository.cs
	namespace 	
HotelBooking
 
. 
Infrastructure %
.% &
Repositories& 2
{ 
public 

class 
CustomerRepository #
:$ %
IRepository& 1
<1 2
Customer2 :
>: ;
{		 
private

 
readonly

 
HotelBookingContext

 ,
db

- /
;

/ 0
public 
CustomerRepository !
(! "
HotelBookingContext" 5
context6 =
)= >
{ 	
db 
= 
context 
; 
} 	
public 
void 
Add 
( 
Customer  
entity! '
)' (
{ 	
throw 
new #
NotImplementedException -
(- .
). /
;/ 0
} 	
public 
void 
Edit 
( 
Customer !
entity" (
)( )
{ 	
throw 
new #
NotImplementedException -
(- .
). /
;/ 0
} 	
public 
Customer 
Get 
( 
int 
id  "
)" #
{ 	
throw 
new #
NotImplementedException -
(- .
). /
;/ 0
} 	
public   
IEnumerable   
<   
Customer   #
>  # $
GetAll  % +
(  + ,
)  , -
{!! 	
return"" 
db"" 
."" 
Customer"" 
."" 
ToList"" %
(""% &
)""& '
;""' (
}## 	
public%% 
void%% 
Remove%% 
(%% 
int%% 
id%% !
)%%! "
{&& 	
throw'' 
new'' #
NotImplementedException'' -
(''- .
)''. /
;''/ 0
}(( 	
})) 
}** ‘
}/Users/hk/Documents/Undervisning/Test/Solutions/HotelBooking_Clean/HotelBooking.Infrastructure/Repositories/RoomRepository.cs
	namespace 	
HotelBooking
 
. 
Infrastructure %
.% &
Repositories& 2
{ 
public 

class 
RoomRepository 
:  !
IRepository" -
<- .
Room. 2
>2 3
{		 
private

 
readonly

 
HotelBookingContext

 ,
db

- /
;

/ 0
public 
RoomRepository 
( 
HotelBookingContext 1
context2 9
)9 :
{ 	
db 
= 
context 
; 
} 	
public 
void 
Add 
( 
Room 
entity #
)# $
{ 	
db 
. 
Room 
. 
Add 
( 
entity 
) 
;  
db 
. 
SaveChanges 
( 
) 
; 
} 	
public 
void 
Edit 
( 
Room 
entity $
)$ %
{ 	
throw 
new #
NotImplementedException -
(- .
). /
;/ 0
} 	
public 
Room 
Get 
( 
int 
id 
) 
{ 	
return   
db   
.   
Room   
.   
FirstOrDefault   )
(  ) *
r  * +
=>  , .
r  / 0
.  0 1
Id  1 3
==  4 6
id  7 9
)  9 :
;  : ;
}!! 	
public## 
IEnumerable## 
<## 
Room## 
>##  
GetAll##! '
(##' (
)##( )
{$$ 	
return%% 
db%% 
.%% 
Room%% 
.%% 
ToList%% !
(%%! "
)%%" #
;%%# $
}&& 	
public(( 
void(( 
Remove(( 
((( 
int(( 
id(( !
)((! "
{)) 	
var,, 
room,, 
=,, 
db,, 
.,, 
Room,, 
.,, 
Single,, %
(,,% &
r,,& '
=>,,( *
r,,+ ,
.,,, -
Id,,- /
==,,0 2
id,,3 5
),,5 6
;,,6 7
db-- 
.-- 
Room-- 
.-- 
Remove-- 
(-- 
room-- 
)--  
;--  !
db.. 
... 
SaveChanges.. 
(.. 
).. 
;.. 
}// 	
}00 
}11 